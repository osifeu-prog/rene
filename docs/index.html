<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>רנה — מערכת לימוד תכנות משחקית</title>
  <meta name="description" content="רנה — פתיחת פרויקט ראשון בגיטהאב, XP, שיתופים אמיתיים, מדריך מלא ליצירת דף נחיתה אישי בעזרת AI, ואנימציות חלקות ונגישות." />
  <style>
    body {
      font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg,#0d1024,#1a1642);
      color:#fff;
      margin:0; padding:0;
    }
    h1,h2,h3,p,li,code { color:#fff }
    .container{max-width:1200px;margin:0 auto;padding:2rem}
    .btn{display:inline-block;padding:.8rem 1.2rem;margin:.3rem;border-radius:999px;background:#ff4d8f;color:#fff;text-decoration:none;cursor:pointer}
    .btn.success{background:#7cfb00;color:#102b00;font-weight:700}
    .xp{background:rgba(0,255,225,.18);border:1px solid rgba(0,255,225,.35);border-radius:999px;padding:.2rem .6rem;font-weight:600}
    textarea{width:100%;padding:.6rem;border-radius:8px;border:1px solid #ccc;margin-top:.5rem}
    .leaderboard ul{list-style:none;padding:0}
    .leaderboard li{background:rgba(255,255,255,.1);padding:.6rem;border-radius:12px;margin:.3rem 0}
  </style>
</head>
<body>
  <div class="container">
    <section class="hero">
      <h1>🎮 רנה — מערכת לימוד תכנות משחקית</h1>
      <p>פותחים פרויקט ראשון בגיטהאב, צוברים XP, מזמינים חברים עם לינק אישי ומחברים את דף הנחיתה שלכם — הכל נגיש, צבעוני וחלק.</p>
      <div>
        <a class="btn" href="https://github.com/signup" target="_blank">🧑‍🚀 הירשם לגיטהאב</a>
        <a class="btn" href="https://github.com/new" target="_blank">📦 פתח את הפרויקט הראשון שלך</a>
        <button class="btn" id="connectRepoBtn">🔗 חבר את הדף לפרויקט שלך</button>
      </div>
    </section>

    <section class="task">
      <h2>🚀 משימה #1 — הפרויקט הראשון שלך בגיטהאב</h2>
      <ol>
        <li>פתח משתמש חדש בגיטהאב.</li>
        <li>צור ריפו חדש בשם <code>rene-first-project</code>.</li>
        <li>העלה את הקובץ <code>index.html</code> עם הקוד הזה.</li>
        <li>הפעל GitHub Pages כדי לקבל לינק אישי.</li>
        <li>חבר את הלינק כאן כדי לקבל XP ולשתף חברים.</li>
      </ol>
      <p class="xp">+50 XP על פתיחת הפרויקט הראשון</p>
    </section>

    <section class="guide">
      <h2>📚 מדריך מלא — יצירת דף נחיתה אישי בעזרת AI</h2>
      <p>אפשר להשתמש ב־Copilot או ChatGPT כדי ליצור דף נחיתה אישי. פרומפט לדוגמה:</p>
      <code>
צור לי דף נחיתה אישי בעברית עם:
- כותרת גדולה עם שמי
- תיאור קצר למה אני אוהב לתכנת
- תמונה או רקע צבעוני
- כפתור "צור קשר" וכפתור "צפה בפרויקט שלי"
- טקסט לבן וניגודיות טובה
- אנימציות חלקות
      </code>
      <p>העתיקו את הקוד שהתקבל והדביקו אותו בריפו שלכם.</p>
    </section>

    <section class="game">
      <h2>🎲 להגרלת קלף תכנות</h2>
      <button class="btn" id="drawCardBtn">הגרל קלף!</button>
      <div class="deck" id="deck"></div>
      <div id="answerArea" style="display:none;">
        <h3>✍️ כתבו כאן את הפתרון שלכם:</h3>
        <textarea id="studentAnswer" rows="4"></textarea>
        <button class="btn success" id="submitAnswerBtn">שלח תשובה</button>
        <p class="xp" id="answerXP" style="display:none;">+10 XP על כתיבת תשובה</p>
      </div>
    </section>

    <section class="share">
      <h2>🔗 שתפו את העמוד שלכם</h2>
      <input id="shareUrl" type="text" placeholder="הדביקו כאן את כתובת הדף שלכם (GitHub Pages)"/>
      <button class="btn" id="saveShareUrl">💾 שמור כתובת</button>
      <button class="btn" id="copyShareUrl">📣 העתק קישור לשיתוף</button>
    </section>

    <section class="post-connect" id="postConnect" style="display:none;">
      <h2>🎉 הדף שלך מחובר</h2>
      <p>עכשיו אפשר להזמין חברים. כל חבר חדש שיצטרף יקבל את העמוד הזה ויפתח פרויקט אישי משלו. לאחר 24 שיתופים תוכלו להצביע ולבחור שם לרשת.</p>
      <button class="btn success" id="inviteBtn">🎟️ צור לינק הזמנה אישי</button>
      <span class="xp" id="xpBadge">XP: 0</span>
    </section>

    <section class="leaderboard">
      <h2>🏆 לוח מובילים</h2>
      <ul id="leaderList"></ul>
    </section>

    <footer>
      <p>© 2025 רנה — מערכת לימוד תכנות משחקית</p>
    </footer>
  </div>

  <script>
    const ENDPOINTS = {
      leaderboard: '/api/leaderboard'
    };

    const cards = [
      { title:"💡 פונקציה כפול 2", text:"כתבו פונקציה שמחזירה מספר כפול 2.", xp:5 },
      { title:"🔥 ניחוש מספרים", text:"צרו משחק שמגריל מספר 1–50 ואתם מנחשים.", xp:10 }
    ];

    document.getElementById('drawCardBtn').addEventListener('click', ()=>{
      const i = Math.floor(Math.random()*cards.length);
      const c = cards[i];
      const deck = document.getElementById('deck');
      deck.innerHTML = `<div><strong>${c.title}</strong><span class="xp">+${c.xp} XP</span><p>${c.text}</p></div>`;
      document.getElementById('answerArea').style.display='block';
    });

    document.getElementById('submitAnswerBtn').addEventListener('click', ()=>{
      const answer = document.getElementById('studentAnswer').value.trim();
      if(answer){
        document.getElementById('answerXP').style.display='block';
        alert("תשובתך נשמרה! קיבלת +10 XP 🎉");
      } else {
        alert("נא לכתוב תשובה לפני השליחה.");
      }
    });

    async function renderLeaderboard(){
      try{
        const res = await fetch(ENDPOINTS.leaderboard);
        const arr = await res.json();
        const list = document.getElementById('leaderList');
        list.innerHTML = arr.map(x=> `<li>${x.name}
